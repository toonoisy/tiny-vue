var Instance=function(){"use strict";class e{target=null;constructor(){this.subs=new Set}addSub(e){this.subs.add(e)}notify(){this.subs.forEach((e=>{e.update()}))}}class t{constructor(e,t,s){this.$vm=t,this.key=e,this.callback=s,this.value=this.get(),this.update()}get(){e.target=this;const t=this.getValue();return e.target=null,t}getValue(){return this.key.split(".").reduce(((e,t)=>e[`${t}`]),this.$vm)}update(){const e=this.get();this.callback(e)}}class s{constructor(e,t){this.$vm=t,this.$el=this.isElementNode(e)?e:document.querySelector(e),this.compile(this.$el)}isElementNode(e){return 1===e.nodeType}isTextNode(e){return 3===e.nodeType}isDirective(e){return e.startsWith("v-")}compile(e){[...e.childNodes].forEach((e=>{this.isElementNode(e)?this.compileElement(e):this.isTextNode&&this.compileText(e),e.childNodes.length&&this.compile(e)}))}compileElement(e){[...e.attributes].forEach((t=>{const s=t.name;if(this.isDirective(s)){const[i,r]=s.substring(2).split(":"),o=t.value;this.processDirective(e,o,i,r)}}))}compileText(e){const s=e.textContent;if(/({{.+?}})/g.test(s)){const i=s.replace(/^{{|}}$/g,"").trim();i&&new t(i,this.$vm,(t=>{e.textContent=t}))}}processDirective(e,s,i,r){switch(i){case"on":e.addEventListener(r,this.$vm[s].bind(this.$vm));break;case"model":new t(s,this.$vm,(t=>{e.value=t})),e.addEventListener("input",(()=>{this.$vm[s]=e.value}))}}}class i{constructor(e){this.observe(e)}observe(e){if(e&&"object"==typeof e)for(const t in e)Object.hasOwnProperty.call(e,t)&&this.defineReactive(e,t,e[t])}defineReactive(t,s,i){const r=new e;this.observe(i),Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>(e.target&&r.addSub(e.target),i),set(e){i!==e&&(i=e,r.notify())}})}}return class{constructor(e={}){this.$options=e,new i(e.data),this._initProxy(e),new s(e.el,this)}_initProxy({data:e,computed:t,methods:s}){this.dataProxy(e),this.computedProxy(t),this.methodsProxy(s)}dataProxy(e){Object.keys(e).forEach((t=>{Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>e[t],set(s){e[t]=s}})}))}computedProxy(e){Object.keys(e).forEach((t=>{Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get(){return e[t].call(this)},set(){}})}))}methodsProxy(e){Object.keys(e).forEach((t=>{Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>e[t],set(){}})}))}}}();
//# sourceMappingURL=index.js.map
